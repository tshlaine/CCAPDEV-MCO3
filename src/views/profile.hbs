<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="/styles/profile.css">
</head>

<body>
    <div class="header">
        <img class="logo" src="../../images/Logo.png">
        <div class="logo-name">
            <p class="web-name"><span class="Cafe-title">Cafe</span> <span class="St.-title">St.</span></p>
        </div>
        <ul>
            <li id="home-link"><a href="/index">Home</a></li>
            <li><a href="view-establishments.html">View Establishments</a></li>
            <li><a href="login.html">Log In</a></li>
        </ul>
        <div class="user-icon-container">
            <button class="user-button">
                <a href="other-profile.html">
                    <img src="../../images/usericon.png" alt="User Icon" class="user">
                </a>
            </button>
        </div>
    </div>

    <div class="cover">
        <div class="cover-img">
            <label for="coverImageUpload" class="edit-cover-pic">
                <img src="{{ sampleUser.coverpicture }}" id="coverPic" alt="Cover image" class="coverImg">
            </label>
            <input id="coverImageUpload" type="file" accept="image/*" onchange="loadCover(event)"
                style="display: none;">
        </div>
        <div class="profile-img">
            <label for="profileImageUpload" class="edit-profile-pic">
                <img src="{{ sampleUser.profilepicture }}" id="profilePic" alt="Profile image" class="profile">
            </label>
            <input id="profileImageUpload" type="file" accept="image/*" onchange="loadProfile(event)"
                style="display: none;">
        </div>
    </div>

    <div class="profile-upper">
        <img class="designdot" src="../../images/dots.png">
        <div class="profile-name">
            <b><span class="username">{{ sampleUser.username }}</span></b><br>
            <i><b><span class="realname">{{ sampleUser.fullname.firstname }} {{ sampleUser.fullname.lastname }}</span></b></i>

            <div class="edit" onclick="openEditPopup()">
                <img src="../../images/draw.png">
            </div>
        </div>
    </div>

    <div class="edit-popup" id="editPopup">
        <div class="popup-content">
            <span class="close" onclick="closeEditPopup()">&times;</span>
            <b><h2>Edit Profile</h2></b>
            <input type="text" id="newUsername" placeholder="New Username">
            <input type="text" id="newRealname" placeholder="New Real Name">
            <textarea id="newBio" placeholder="New Bio"></textarea>
            <button onclick="saveChanges()">Save</button>
        </div>
    </div>

    <div class="profile-lower">
        <span class="bio">{{ sampleUser.bio }}</span>
    </div>

    <img class="designdot2" src="../../images/dots.png">

    <div class="profile-reviews-container">

        <img class="designdot3" src="../../images/dots.png">
        <a id="prevButton" class="prev" onclick="prevSlide()">&#10094;</a>
        <a id="nextButton" class="next" onclick="nextSlide()">&#10095;</a>

        <div class="dot-container">
        {{#each dots}}
            <span class="dot" onclick="currentSlide({{ this }})"></span>
        {{/each}}
    </div>

        <div id="profile-reviews-set1" class="profile-reviews" data-visible="true">
            {{#each sampleReviews as |sampleReviews index|}}
            <div class="review1-container">
                <img src="{{sampleReviews.logoimage}}" class="review1">
                <div class="review1-review">
                    <br>
                    <span class="review-title">{{ sampleReviews.reviewtitle }}</span><br><br>
                    <span class="review-text">{{ sampleReviews.reviewbody }}</span>
                    <div class="star-rating">
                        {{#each sampleReviews.stars}}
                            <span class="star">{{ this }}</span>
                        {{/each}}
                    </div>
                </div>
            </div>
        {{/each}}

        </div>
    </div>

    <script>
    function loadProfile(event) {
        var reader = new FileReader();
        reader.onload = function () {
            var output = document.getElementById('profilePic');
            output.src = reader.result;
        };
        reader.readAsDataURL(event.target.files[0]);
    }
    
    function loadCover(event) {
        var reader = new FileReader();
        reader.onload = function () {
            var output = document.getElementById('coverPic');
            output.src = reader.result;
        };
        reader.readAsDataURL(event.target.files[0]);
    }

    function openEditPopup() {
        var editPopup = document.getElementById('editPopup');
        editPopup.style.display = 'block';
    }

    function closeEditPopup() {
        var editPopup = document.getElementById('editPopup');
        editPopup.style.display = 'none';
    }

    function saveChanges() {
        var newUsername = document.getElementById('newUsername').value;
        var newRealname = document.getElementById('newRealname').value;
        var newBio = document.getElementById('newBio').value;

        closeEditPopup();
    }

    let currentSlideIndex = 1;

    function showSlide(slideIndex) {
        const reviewSets = document.querySelectorAll('.profile-reviews');
        const dots = document.querySelectorAll('.dot');

        reviewSets.forEach((reviewSet, index) => {
            if (index + 1 === slideIndex) {
                reviewSet.style.display = 'block';
            } else {
                reviewSet.style.display = 'none';
            }
        });

        dots.forEach((dot, index) => {
            if (index + 1 === slideIndex) {
                dot.classList.add('active');
            } else {
                dot.classList.remove('active');
            }
        });
    }

    function nextSlide() {
        currentSlideIndex++;
        if (currentSlideIndex > 2) {
            currentSlideIndex = 1;
        }
        showSlide(currentSlideIndex);
    }

    function prevSlide() {
        currentSlideIndex--;
        if (currentSlideIndex < 1) {
            currentSlideIndex =


</body>

</html>
